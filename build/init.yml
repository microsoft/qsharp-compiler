steps:

##
# Bootstrap
##
- powershell: ./bootstrap.ps1
  displayName: "Prepare build"
  workingDirectory: $(System.DefaultWorkingDirectory)

##
# Pre-reqs
##
- task: NuGetToolInstaller@0
  displayName: 'Use NuGet 4.9.3'
  inputs:
    versionSpec: '4.9.3'

- task: NuGetCommand@2
  displayName: 'Restore packages for QsCompiler.sln'
  inputs:
    restoreSolution: '$(System.DefaultWorkingDirectory)/QsCompiler.sln'

- task: NuGetCommand@2
  displayName: 'Restore packages for VisualStudioExtension.sln'
  inputs:
    restoreSolution: '$(System.DefaultWorkingDirectory)/VisualStudioExtension.sln'

- task: Npm@1
  displayName: 'Install vsce'
  inputs:
    command: custom
    verbose: false
    customCommand: 'install -g vsce'
