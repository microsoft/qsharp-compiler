name: $(Build.Major).$(Build.Minor).$(date:yyMM).$(DayOfMonth)$(rev:rr)

variables:
  Build.Major: 0
  Build.Minor: 14
  Assembly.Version: $(Build.BuildNumber)
  Assembly.Constants: ''
  Drops.Dir: $(Build.ArtifactStagingDirectory)/drops
  Nuget.Outdir: $(Drops.Dir)/nugets
  VSIX.Outdir: $(Drops.Dir)/vsix
  Blobs.Outdir: $(Drops.Dir)/blobs

trigger: none

pr:
- main
- feature/*
- features/*
- release/*

schedules:
- cron: "0 8 * * *"
  displayName: 'Build for Component Governance'
  branches:
    include:
    - main
  always: false

jobs:
- job: "QsCompiler"
  pool: 
    vmImage: 'windows-latest'
  steps:
  - template: steps.yml

  - task: ms.vss-governance-buildtask.governance-build-task-component-detection.ComponentGovernanceComponentDetection@0
    displayName: 'Component detection'
    inputs:
      failOnAlert: true
