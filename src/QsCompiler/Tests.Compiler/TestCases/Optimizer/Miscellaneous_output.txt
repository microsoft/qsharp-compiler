namespace Microsoft.Quantum.Testing {
    Function pickM (p, d) : (Qubit => Result) {
        QsBody (p, d) {
            let twice = (LocalVariable d * 2.000000);
            if (LocalVariable twice > 1.000000) {
                if (LocalVariable p = PauliZ) {
                    return GlobalCallable op0;
                }
            }
            return GlobalCallable M;
        }
    }

    Operation CNOT (q1, q2) : UnitType {
        QsAdjoint Intrinsic
        QsBody Intrinsic
        QsControlled Intrinsic
        QsControlledAdjoint Intrinsic
    }

    Operation M (q) : Result {
        QsBody Intrinsic
    }

    Operation Test () : UnitType {
        QsBody () {
            Allocate ((q1, q2, __qsItem1__qs__, __qsItem2__qs__, __qsItem3__qs__, __qsItem4__qs__) = (Qubit(), Qubit(), Qubit(), Qubit(), Qubit(), Qubit())) {
                (GlobalCallable CNOT of (LocalVariable q1, LocalVariable __qsItem1__qs__));
                (GlobalCallable CNOT of (LocalVariable q1, LocalVariable __qsItem2__qs__));
                (GlobalCallable CNOT of (LocalVariable q1, LocalVariable __qsItem3__qs__));
                (GlobalCallable CNOT of (LocalVariable q1, LocalVariable __qsItem4__qs__));
                let r = (GlobalCallable M of LocalVariable q1);
                if (LocalVariable r = One) {
                    mutable __returnVal__ = Zero;
                    repeat {
                        mutable res = [Zero, Zero];
                    }
                    until (LocalVariable res[0] = One)
                    fixup {
                        set LocalVariable res = (LocalVariable res w/= 0 <- One);
                    }
                    set LocalVariable __returnVal__ = One;
                    mutable __qsVar1____returnVal____ = Zero;
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem1__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem2__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem3__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem4__qs__));
                    repeat {
                        mutable __qsVar1__res__ = [Zero, Zero];
                    }
                    until (LocalVariable __qsVar1__res__[0] = One)
                    fixup {
                        set LocalVariable __qsVar1__res__ = (LocalVariable __qsVar1__res__ w/= 0 <- One);
                    }
                    set LocalVariable __qsVar1____returnVal____ = One;
                    mutable __qsVar2____returnVal____ = Zero;
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem1__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem2__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem3__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem4__qs__));
                    repeat {
                        mutable __qsVar2__res__ = [Zero, Zero];
                    }
                    until (LocalVariable __qsVar2__res__[0] = One)
                    fixup {
                        set LocalVariable __qsVar2__res__ = (LocalVariable __qsVar2__res__ w/= 0 <- One);
                    }
                    set LocalVariable __qsVar2____returnVal____ = One;
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem1__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem2__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem3__qs__));
                    (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsItem4__qs__));
                } else {
                    fail "r is supposed to be Zero";
                }
            }
        }
    }

    Operation op0 (q) : Result {
        QsBody (q) {
            repeat {
                mutable res = [Zero, Zero];
            }
            until (LocalVariable res[0] = One)
            fixup {
                set LocalVariable res = (LocalVariable res w/= 0 <- One);
            }
            return One;
        }
    }

    Operation op1 (q1, r1) : UnitType {
        QsAdjoint Generated SelfInverse
        QsBody (q1, r1) {
            ((Adjoint GlobalCallable CNOT) of (LocalVariable q1, (Unwrap LocalVariable r1)[0]));
            for item in (Unwrap LocalVariable r1) {
                (GlobalCallable CNOT of (LocalVariable q1, LocalVariable item));
            }
        }
        QsControlled (__controlQubits__, (q1, r1)) {
            ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable __controlQubits__, (LocalVariable q1, (Unwrap LocalVariable r1)[0])));
            for item in (Unwrap LocalVariable r1) {
                ((Controlled GlobalCallable CNOT) of (LocalVariable __controlQubits__, (LocalVariable q1, LocalVariable item)));
                ((Controlled GlobalCallable CNOT) of (LocalVariable __controlQubits__, (LocalVariable q1, LocalVariable item)));
                ((Controlled GlobalCallable CNOT) of (LocalVariable __controlQubits__, (LocalVariable q1, LocalVariable item)));
            }
        }
        QsControlledAdjoint Generated SelfInverse
    }

    Operation op2 (q2, n2, b2, q) : UnitType {
        QsAdjoint (q2, n2, b2, q) {
            mutable __returnVal__ = Zero;
            repeat {
                mutable res = [Zero, Zero];
            }
            until (LocalVariable res[0] = One)
            fixup {
                set LocalVariable res = (LocalVariable res w/= 0 <- One);
            }
            set LocalVariable __returnVal__ = One;
            if (LocalVariable __returnVal__ = One) {
                mutable __qsVar1____returnVal____ = Zero;
                repeat {
                    mutable __qsVar1__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar1__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar1__res__ = (LocalVariable __qsVar1__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar1____returnVal____ = One;
                mutable __qsVar2____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for item in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable item));
                }
                repeat {
                    mutable __qsVar2__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar2__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar2__res__ = (LocalVariable __qsVar2__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar2____returnVal____ = One;
                mutable __qsVar3____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar1__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar1__item__));
                }
                repeat {
                    mutable __qsVar3__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar3__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar3__res__ = (LocalVariable __qsVar3__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar3____returnVal____ = One;
                mutable __qsVar4____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar2__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar2__item__));
                }
                repeat {
                    mutable __qsVar4__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar4__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar4__res__ = (LocalVariable __qsVar4__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar4____returnVal____ = One;
                mutable __qsVar5____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar3__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar3__item__));
                }
                repeat {
                    mutable __qsVar5__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar5__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar5__res__ = (LocalVariable __qsVar5__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar5____returnVal____ = One;
                mutable __qsVar6____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar4__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar4__item__));
                }
                repeat {
                    mutable __qsVar6__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar6__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar6__res__ = (LocalVariable __qsVar6__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar6____returnVal____ = One;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar5__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar5__item__));
                }
            }
            ((Adjoint GlobalCallable CNOT) of (LocalVariable q2, (Unwrap LocalVariable b2)[0]));
            for __qsVar6__item__ in (Unwrap LocalVariable b2) {
                (GlobalCallable CNOT of (LocalVariable q2, LocalVariable __qsVar6__item__));
            }
        }
        QsBody (q2, n2, b2, q) {
            ((Adjoint GlobalCallable CNOT) of (LocalVariable q2, (Unwrap LocalVariable b2)[0]));
            for item in (Unwrap LocalVariable b2) {
                (GlobalCallable CNOT of (LocalVariable q2, LocalVariable item));
            }
            let r = (GlobalCallable M of LocalVariable q2);
            if (LocalVariable r = One) {
                mutable __returnVal__ = Zero;
                repeat {
                    mutable res = [Zero, Zero];
                }
                until (LocalVariable res[0] = One)
                fixup {
                    set LocalVariable res = (LocalVariable res w/= 0 <- One);
                }
                set LocalVariable __returnVal__ = One;
                mutable __qsVar1____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar1__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar1__item__));
                }
                repeat {
                    mutable __qsVar1__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar1__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar1__res__ = (LocalVariable __qsVar1__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar1____returnVal____ = One;
                mutable __qsVar2____returnVal____ = Zero;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar2__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar2__item__));
                }
                repeat {
                    mutable __qsVar2__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar2__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar2__res__ = (LocalVariable __qsVar2__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar2____returnVal____ = One;
                ((Adjoint GlobalCallable CNOT) of ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0]));
                for __qsVar3__item__ in (Unwrap LocalVariable b2) {
                    (GlobalCallable CNOT of ((Unwrap LocalVariable q), LocalVariable __qsVar3__item__));
                }
            } else {
                fail "r is supposed to be Zero";
            }
        }
        QsControlled (ctrls, (q2, n2, b2, q)) {
            ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, (LocalVariable q2, (Unwrap LocalVariable b2)[0])));
            for item in (Unwrap LocalVariable b2) {
                ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, (LocalVariable q2, LocalVariable item)));
                ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, (LocalVariable q2, LocalVariable item)));
                ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, (LocalVariable q2, LocalVariable item)));
            }
            let r = (GlobalCallable M of LocalVariable q2);
            if (LocalVariable r = One) {
                mutable __returnVal__ = Zero;
                repeat {
                    mutable res = [Zero, Zero];
                }
                until (LocalVariable res[0] = One)
                fixup {
                    set LocalVariable res = (LocalVariable res w/= 0 <- One);
                }
                set LocalVariable __returnVal__ = One;
                mutable __qsVar1____returnVal____ = Zero;
                ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0])));
                for __qsVar1__item__ in (Unwrap LocalVariable b2) {
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar1__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar1__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar1__item__)));
                }
                repeat {
                    mutable __qsVar1__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar1__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar1__res__ = (LocalVariable __qsVar1__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar1____returnVal____ = One;
                mutable __qsVar2____returnVal____ = Zero;
                ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0])));
                for __qsVar2__item__ in (Unwrap LocalVariable b2) {
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar2__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar2__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar2__item__)));
                }
                repeat {
                    mutable __qsVar2__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar2__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar2__res__ = (LocalVariable __qsVar2__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar2____returnVal____ = One;
                mutable __qsVar3____returnVal____ = Zero;
                ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0])));
                for __qsVar3__item__ in (Unwrap LocalVariable b2) {
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar3__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar3__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar3__item__)));
                }
                repeat {
                    mutable __qsVar3__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar3__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar3__res__ = (LocalVariable __qsVar3__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar3____returnVal____ = One;
                mutable __qsVar4____returnVal____ = Zero;
                ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0])));
                for __qsVar4__item__ in (Unwrap LocalVariable b2) {
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar4__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar4__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar4__item__)));
                }
                repeat {
                    mutable __qsVar4__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar4__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar4__res__ = (LocalVariable __qsVar4__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar4____returnVal____ = One;
                mutable __qsVar5____returnVal____ = Zero;
                ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0])));
                for __qsVar5__item__ in (Unwrap LocalVariable b2) {
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar5__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar5__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar5__item__)));
                }
                repeat {
                    mutable __qsVar5__res__ = [Zero, Zero];
                }
                until (LocalVariable __qsVar5__res__[0] = One)
                fixup {
                    set LocalVariable __qsVar5__res__ = (LocalVariable __qsVar5__res__ w/= 0 <- One);
                }
                set LocalVariable __qsVar5____returnVal____ = One;
                ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, ((Unwrap LocalVariable q), (Unwrap LocalVariable b2)[0])));
                for __qsVar6__item__ in (Unwrap LocalVariable b2) {
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar6__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar6__item__)));
                    ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, ((Unwrap LocalVariable q), LocalVariable __qsVar6__item__)));
                }
            }
        }
        QsControlledAdjoint (ctrls, (q2, n2, b2, q)) {
            ((Controlled (Adjoint GlobalCallable CNOT)) of (LocalVariable ctrls, (LocalVariable q2, (Unwrap LocalVariable b2)[0])));
            for item in (Unwrap LocalVariable b2) {
                ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, (LocalVariable q2, LocalVariable item)));
                ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, (LocalVariable q2, LocalVariable item)));
                ((Controlled GlobalCallable CNOT) of (LocalVariable ctrls, (LocalVariable q2, LocalVariable item)));
            }
        }
    }

    TypeConstructor BigEndianRegister (__Item1__) : BigEndianRegister {
        QsBody Intrinsic
    }

    TypeConstructor OtherTuple (__Item1__, __Item2__) : OtherTuple {
        QsBody Intrinsic
    }

    TypeConstructor OtherType (__Item1__, __Item2__) : OtherType {
        QsBody Intrinsic
    }

    TypeConstructor QubitAlias (__Item1__) : QubitAlias {
        QsBody Intrinsic
    }

    newtype BigEndianRegister = Qubit[];

    newtype OtherTuple = (OtherType, Int);

    newtype OtherType = (Int, Qubit[]);

    newtype QubitAlias = Qubit;
}